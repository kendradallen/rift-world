@model RiftWorld.DATA.EF.NPC

@{
    ViewBag.Title = "Details";
}

@* TODO - transfer detailsV2 to details view (and ensure controller actions are okay *@
@*<article class="container" id="content" >
    <div class="row">*@
        <section id="start" class="col-12">
            <div id="quote" class="clearfix">
                <blockquote>
                    <h4>
                        @Html.DisplayFor(model => model.Quote)
                    </h4>
                </blockquote>
            </div>
            <div id="startTop" class="row">
                <div id="startTop-left" class="col-md-9">
                    <div id="name">
                        @Html.DisplayFor(model => model.Name)
                    </div>
                    <div id="aliases">
                        <h5>
                            @Html.DisplayNameFor(model => model.Alias)
                        </h5><p>
                            @Html.DisplayFor(model => model.Alias)
                        </p>
                    </div>
                </div>
                <div id="startTop-right" class="col-md-3">
                    <div id="picture">
                        <img src="https://vignette.wikia.nocookie.net/criticalrole/images/9/91/Percy2.png/revision/latest/scale-to-width-down/310?cb=20151228164610" />
                    </div>
                    <div id="basic-stuff" class="row">
                        <p id="race" class="col-6">
                            @Html.DisplayFor(model => model.Race.RaceName)
                        </p>
                        <p id="class" class="col-6">@ViewBag.Classes</p>
                    </div>
                </div>
            </div>
            <br />
            <div id="startLower" class="row">
                <div id="crest" class="col-md-2">
                    <img src="https://vignette.wikia.nocookie.net/criticalrole/images/5/59/DeRolo_Crest.JPG/revision/latest/scale-to-width-down/180?cb=20180516101724" />
                </div>
                <div id="startLower-right" class="col-md-10">
                    <div id="orgs">
                        <h4 style="text-decoration:underline;">Member of</h4>
                        @Html.Action("_OrgsPartial", "NPCs", new { id = Model.NpcId })

                        @*<ul>
                            <li>
                                Vox Machina
                            </li>
                            <li>
                                The De Rolo family - <i>current head </i>
                            </li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                            <li> we're just gonna keep going</li>
                        </ul>*@
                    </div>
                    <div id="lastLo">
                        <dl>
                            <dt>
                                @Html.DisplayNameFor(model => model.LastLocationId)
                            </dt>
                            <dd>
                                @Html.DisplayFor(model => model.Locale.Name)
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </section>
        <br />
        <section id="apperance" class="col-12">
            <h2 class="line">
                @Html.DisplayNameFor(model => model.ApperanceText)
            </h2>
            <div class="hang">
                @* @Html.DisplayFor(model => model.ApperanceText)*@
                @Html.Raw(Model.ApperanceText)

                @*<p>Percy is a young human in his early twenties,.He originally had brown hair, but it turned white as a result of the trauma he suffered after the Briarwoods killed his family and he ran away with the aid of his sister Cassandra.</p>

                <p>After joining the Slayer's Take, Percy has the brand of the guild on his right arm.</p>*@
            </div>
        </section>
        <section id="about" class="col-12">
            <h2 class="line">
                @Html.DisplayNameFor(model => model.AboutText)
            </h2>
            <div class="hang">
                @*<form method="post">
                    <textarea id="mytextarea">@Html.Raw(Model.AboutText)</textarea>
                </form>*@
                @Html.Raw(Html.Raw(Model.AboutText))

                <p> Compared to his fellow party, Percy is rather quiet, usually only speaking when necessary. However, he has shown he can be quite persuasive in social situations and is somewhat of a strategist within the group, as seen in "The Temple Showdown" (1x11).</p>

                <p>Percy thinks of himself as being the only one capable of making adult decisions, despite his young age. He is also very pragmatic, with a consistent belief that the ends justify the means. This has led to moments of conflict between him and the party.</p>
                <h5 style="text-decoration: underline;">Background</h5>
                <p>Percy was raised alongside his six siblings in Whitestone, where his branch of the de Rolo family ruled. Five years before the campaign began, the Briarwoods were invited in as guests, where they proceeded to seize control of Whitestone, murdering the de Rolos and those loyal to them. Percy was taken prisoner and tortured by Anna Ripley. After Percy fled Whitestone with the help of his sister Cassandra, he wandered aimlessly before setting out to avenge his family. Percy then constructed his first gun, the List. On five of its six barrels he inscribed a target of his vengeance: Lord Briarwood, Lady Briarwood, Dr. Ripley, Sir Kerrion Stonefell, and Professor Anders. Percy tracked Dr. Ripley for a year until he made his way to Stilben, where he attempted to kill her. He was captured by Dr. Ripley's guards and imprisoned until he was freed by the rest of Vox Machina.</p>

                <p>Because he is a gunslinger, Percy is the main long-ranged attack member of Vox Machina. He previously fought with his two guns, "The List", a six-barrel pepper-box, and "Bad News", a sniper rifle-esque device. The List has since been destroyed, and Percy has acquired two new weapons, both from Dr. Ripley: a four-shot pistol which he called "Retort", and another pepperbox known as "Animus". He also has experience in using melee weapons, usually a rapier or a longsword.</p>

                <p>Percy is also a tinkerer, creating and modifying items to give both himself and his teammates an edge in battle. He creates explosive and utility arrows for Vex'ahlia, as well as crafting his own ammunition and even weapons, such as his Diplomacy electroshock glove.</p>
            </div>
        </section>
        @Html.Action("_Details", "Secrets", new { id = Model.NpcId })
        <section id="story" class="col-12">
            <h2 class="line">Stories</h2>

        </section>
        <section id="rumors" class="col-12">
            <h2 class="line">Rumors</h2>
            <div>
                <div>
                    <h6>Kinna whispers...</h6>
                    <p>That once Wren was totally the one who messed with Ben. </p>
                </div>
            </div>
        </section>
    @*</div>*@
    <footer id="tags">
        <div class="tag-list">
            <a href="#"><span>Vox Machina</span></a>
            <a href="#"><span>Taldore</span></a>
        </div>
        <p>
            @Html.ActionLink("Edit", "Edit", new { id = Model.NpcId }) |
            @Html.ActionLink("Back to List", "Index")
        </p>

    </footer>
@*</article>*@

@section Scripts{

    @*<script>
        var counter = 0;
        $("section").each(function () {
            var id = $(this).attr("id");
            var top = 20 + 60 * counter;
            $("#mySidenav").append('<a href="#' + id + '" id="' + id + '-nav" style="top:' + top + 'px;">' + id + '</a>');
            counter++;
            window.addEventListener("scroll", event => {
                let fromTop = window.scrollY -284; /*284 is the size of the top nav bar*/
                let daLink = document.querySelector("#mySidenav a#" + id + "-nav");
                let section = document.querySelector(daLink.hash);

                if (
                    section.offsetTop <= fromTop &&
                    section.offsetTop + section.offsetHeight > fromTop
                ) {
                    daLink.classList.add("active");
                } else {
                    daLink.classList.remove("active");
                }

            })
        })

    </script>

<script>
        //smooth scrolling

        // Select all »a« elements with a parent class »links« and add a function that is executed on click
        $('.sidenav a').on('click', function (e) {

            // Define variable of the clicked »a« element (»this«) and get its href value.
            var href = $(this).attr('href');

            // Run a scroll animation to the position of the element which has the same id like the href value.
            $('html, body').animate({
                scrollTop: $(href).offset().top
            }, '300');

            // Prevent the browser from showing the attribute name of the clicked link in the address bar
            e.preventDefault();

        });   
    </script>*@

}

@*
    @Html.DisplayNameFor(model => model.Name)

    @Html.DisplayNameFor(model => model.Quote)

    @Html.DisplayNameFor(model => model.PortraitFileName)
    @Html.DisplayFor(model => model.PortraitFileName)

    @Html.DisplayNameFor(model => model.CrestFileName)
    @Html.DisplayFor(model => model.CrestFileName)

    @Html.DisplayFor(model => model.AboutText)

    @Html.DisplayNameFor(model => model.IsWorkInProgress)
    @Html.DisplayFor(model => model.IsWorkInProgress)

    @Html.DisplayNameFor(model => model.Info.Blurb)
    @Html.DisplayFor(model => model.Info.Blurb)

    @Html.DisplayNameFor(model => model.Race.RaceName)
*@